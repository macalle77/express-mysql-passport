<!DOCTYPE html>
<html>
  <head>
    <% include header %>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="color:#ffffff; background-color: #005500;">
      <div class="container">
       <a class="navbar-brand" href="home"><b><%=title%></b></a>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
           <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarSupportedContent">
           <ul class="navbar-nav mr-auto">
              <li class="nav-item active"><a class="nav-link" href="/home?seccion=listado">Gestión Participantes<span class="sr-only">(current)</span></a></li>
              <li class="nav-item"><a class="nav-link" href="/home?seccion=gestionar">Gestión Actividad</a></li>
              <li class="nav-item"><a class="nav-link" href="/home?seccion=nuevaactividad">Nueva Actividad</a></li>
              <li class="nav-item"><a class="nav-link" href="/home?seccion=nuevo">Nueva Participante</a></li>
              <li class="nav-item"><a class="nav-link" href="/signout">Cerrar Sesión</a></li>
           </ul>
         </div>
       </div>
     </nav>
    <div class="container">
      <form action="/filtrar" method="post">
        <legend>Buscar Usuario</legend>
        <div class="form-group">
            <input type="text" id="dni" class="form-control" name="dni"/>
        </div>
        <div class="form-group">
          <input type="text" id="nombre" class="form-control" name="nombre"/>
        </div>
        <div class="form-group">
          <input type="text" id="apellidos" class="form-control" name="apellidos"/>
        </div>
        <button class="btn btn-primary">
           Filtrar
        </button>
      </form>
      </hr>
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th>#</th>
            <th>DNI</th>
            <th>Nombre</th>
            <th>Apellidos</th>
            <th>Teléfono</th>
            <th>Dirección</th>
            <th>Email</th>
            <th>Eliminar</th>
            <th>Actualizar</th>
            <th>Confirmar pago</th>
            <th>Confirmar firma</th>
          </tr>
        </thead>
        <tbody>
            <% for (var i = 0; i < users.length; i++) { %>
                <tr>
                    <td><%= i + 1 %></td>
                    <td><%= users[i].dni %></td>
                    <td><%= users[i].nombre %></td>
                    <td><%= users[i].apellidos %></td>
                    <td><%= users[i].telefono %></td>
                    <td><%= users[i].direccion %></td>
                    <td><%= users[i].email %></td>
                    <td><a id="delete" class="btn btn-danger" href="/deleteuser/<%= users[i].dni%>">Borrar</a></td>
                    <td><a id="update" class="btn btn-danger" href="/updateuser/<%= users[i].dni%>">Actualizar</a></td>
                    <td><a id="pagado" class="<%= users[i].pagado ? 'btn btn-success':'btn btn-dark'%>" href="/pagadouser/<%= users[i].dni%>">Pagado</a></td>
                    <td><a id="firmado" class="<%= users[i].firmado ? 'btn btn-success':'btn btn-dark'%>" href="/firmadouser/<%= users[i].dni%>">Firmado</a></td>
                  </tr>
              <% } %>
        </tbody>
      </table>
    </div>
   <script>
     document.getElementById('title').focus();
     document.getElementById('delete').addEventListener('click', function(e){
       let response=confirm('¿Estás seguro de borrar este usuario?');
       if(!response){
         e.preventDefault();
       }
     })
   </script>
   <% include footer %>
  </body>
</html>
